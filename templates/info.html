<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dicom Viewer</title>

    <!-- Styles -->
    <link rel="stylesheet" href="/static/info.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Cornerstone dependencies -->
    <script src="https://unpkg.com/cornerstone-core"></script>
    <script src="https://unpkg.com/cornerstone-wado-image-loader"></script>
    <script src="https://unpkg.com/dicom-parser"></script>

    <!-- Custom JS -->
    <script src="/static/info.js" defer></script>
</head>
<body>
    <header>
        <h3>Welcome to DCM Viewer</h3>
    </header>

    <!-- Navigation bar -->
    <nav class="navbar">
        <div class="left-buttons">
            <button onclick="window.location.href='/'">Trang chủ</button>

            <!-- Hidden file input for DICOM -->
            <input type="file" id="dicomInput" accept=".dcm" style="display: none;">
            <button onclick="document.getElementById('dicomInput').click()">Import DICOM</button>
        </div>

        <div class="right-buttons">
            <!-- <button id="analyzeButton" title="Phân tích bằng AI">
                <i class="fa-solid fa-lungs"></i>
            </button> -->
            <!-- <button class="icon-btn" onclick="invertImage()" title="Đảo màu">
                <i class="fas fa-adjust"></i>
            </button> -->
            <!-- Các nút chỉnh ảnh -->
            <button class="icon-btn" onclick="adjustBrightness(10)" title="Tăng Sáng">
                <i class="fas fa-sun"></i>
            </button>
            <button class="icon-btn" onclick="adjustBrightness(-10)" title="Giảm Sáng">
                <i class="fas fa-moon"></i>
            </button>
            <button class="icon-btn" onclick="zoomImage(0.1)" title="Phóng to">
                <i class="fas fa-search-plus"></i>
            </button>
            <button class="icon-btn" onclick="zoomImage(-0.1)" title="Thu nhỏ">
                <i class="fas fa-search-minus"></i>
            </button>
            <button class="icon-btn" onclick="rotateImage()" title="Xoay ảnh">
                <i class="fas fa-undo-alt"></i>
            </button>
            <button class="icon-btn" onclick="flipHorizontalImage()" title="Lật ngang">
                <i class="fas fa-arrows-alt-h"></i>
            </button>
            <button class="icon-btn" onclick="flipVerticalImage()" title="Lật dọc">
                <i class="fas fa-arrows-alt-v"></i>
            </button>
        </div>
    </nav>

    <!-- Nội dung chính -->
    <div class="main-container">
        <div class="dicom-container">
            <div id="dicomViewer" style="position: relative;"></div>
            <canvas id="overlayCanvas" style="position: absolute; top: 0; left: 0; pointer-events: none;"></canvas>
        </div>

        <div class="dicom-info">
            <h2>Thông tin Bệnh nhân</h2>
            <div id="dicomMetadata"></div>

            <div id="aiResults" style="margin-top: 20px;">
                <h3>Kết quả Phân tích AI</h3>
                <div id="resultImages"></div>
            </div>
        </div>
    </div>
</body>
</html>
